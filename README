# Project: Smart Plant Monitoring System with ESP32

## Introduction
Measurement/Control/Visualization of the environment for tropical plants
The goal of the project would be to create a system that measures key environmental parameters (such as temperature, humidity, light levels, soil moisture) for tropical plants.
This system should also allow the user to control or adjust environmental conditions and visualize the data.

This project was developed by Gerson Hauwanga, Adri√°n Macias and Mario Loizaga. The aim is to create a smart environmental monitoring system using an ESP32, sensors for temperature, humidity, light, and soil moisture, along with an integrated web server for real-time data visualization.

The system measures and displays sensor values on an OLED screen and transmits this data through a web interface. It also includes LED control based on detected light levels and a buzzer alert for critical soil moisture conditions.

We have developed the project using Thonny, a programming environment that allows us to interact directly with microdevices like the ESP32.
By programming in MicroPython, we can create, delete, modify, automate, control, and improve device functions to build a final project that meets our exact requirements.
To achieve this, it is essential to have a solid understanding of MicroPython and the ability to write efficient code that aligns with our objectives.
Additionally, a foundational knowledge of timers, displays, and synchronous/asynchronous communication is beneficial for comprehending the operation of microcontrollers and sensors.
Subsequently, we will create or utilize the files outlined later and upload them to the ESP32 to enable the use of these modules when executed from the main program.

## Main Features
I2C communication:
I2C, which stands for Inter-Integrated Circuit, is a simple, low-speed serial communication protocol commonly used for short-distance communication between integrated circuits on a single printed circuit board.
It's particularly popular in embedded systems due to its simplicity and low cost.
I2C (Inter-Integrated Circuit, I2C, IIC, [eye-squared-C]) is two-wire, synchronous,bi-directional, half-duplex, short-distance, intra-board, serial bus communication
SCL (one-directional Serial Clock), SDA (bi-directional Serial Data) signals
One Master, one or more Slave devices
Communication protocol consists of: Start condition, Address frame, Data frame, Stop condition.

Photoresistor:
A photoresistor, also known as a Light-Dependent Resistor (LDR) or photoconductor, is an electronic component whose electrical resistance varies depending on the amount of light that falls on it.
In simpler terms, the more light it receives, the lower its resistance becomes.
How does it work?
When light hits the semiconductor material of a photoresistor, photons (particles of light) provide energy to electrons, allowing them to move more freely. 
This increased movement of electrons reduces the overall resistance of the material.

Soil moisture:
Soil moisture refers to the amount of water present in the soil. It's a critical factor for life on Earth, influencing:
Plant growth: Water is essential for plants to absorb nutrients and perform photosynthesis.
Biogeochemical cycles: Soil moisture plays a crucial role in the water, carbon, and other element cycles.
Soil stability: Moisture affects soil structure and its ability to resist erosion.
Climate: Evaporation of water from the soil influences atmospheric humidity and precipitation.

Display:
LCD (Liquid Crystal Display) is an electronic device which is used for display any ASCII text. There are many different screen sizes e.g. 16x1, 16x2, 16x4, 20x4, 40x4 characters and each character is made of 5x8 matrix pixel dots.
LCD displays have different LED back-light in yellow-green, white and blue color. LCD modules are mostly available in COB (Chip-On-Board) type.
With this method, the controller IC chip or driver (here: HD44780) is directly mounted on the backside of the LCD module itself.

Web page:
A threading library provides a way to manage multiple threads of execution within a single process.
In the context of web development, threading allows you to handle multiple tasks concurrently, improving the responsiveness of your application.
Then we developed a web page for showing data after reading it. We did it focused on the purpose of controlling data faster and automatically.
Also we can see if any value is lower or higher inmediatly and react to that.

### Classes and Methods
- **`leds_controller.py`** Get-Content leds_controller.py | Out-File -Append README.md 
  - `set_color(r, g, b, n)`: Changes the color of the NeoPixel LEDs.
```python
def set_color(r, g, b, n):  
  for i in range(n):
    np[i] = (r, g, b)
  np.write()
```
- **`main.py`**  Get-Content main.py | Out-File -Append README.md
  - Configures sensors for temperature, humidity, light, and soil moisture.
  - Starts the web server and updates the OLED screen with collected data.
  - Implements light control using a photoresistor.
  - Runs the server in a separate thread for real-time data updates.

- **`server.py`**  Get-Content server.py | Out-File -Append README.md
  - `Server` class: Manages Wi-Fi connection and communication via a web server.
  - Responds to HTTP requests, displaying real-time data on a dynamically updated webpage using **Chart.js**.
  
- **`display.py`**  Get-Content display.py | Out-File -Append README.md
  - `Display` class: Manages the OLED display using the SH1106 driver.
  - Methods:
    - `clear_display(val=0)`: Clears the screen.
    - `show_display()`: Refreshes the screen to show new content.
    - `write_text(text, start, row)`: Writes text at a specific position.

- **`buzzer.py`**  
  - `Buzzer` class: Controls a buzzer using PWM.
  - Method:
    - `sound_buzzer(x)`: Activates the buzzer (1 for on, 0 for off).

- **`soil_moisture.py`**  
  - `SoilMoisture` class: Reads soil moisture levels.
  - Method:
    - `update_soil_value()`: Returns the current ADC value of soil moisture.

### External Modules
- **`neopixel`**: Controls the NeoPixel LEDs.
- **`machine`**: Interacts with ESP32 hardware.
- **`socket`**: Powers the web server.
- **`time`**: Manipulates the time                                               
                                
## Microdevices and Sensors

1. **ESP32**  
   - Acts as the main microcontroller.
   - Connects sensors and manages the web server.

2. **OLED Display (SH1106)**  
   - Displays real-time information.  
   - Connected via I2C (GPIO 21 and GPIO 22).

3. **Soil Moisture Sensor**  
   - Detects soil moisture levels.  
   - Connected to ESP32 ADC (GPIO 35).

4. **Photoresistor**  
   - Measures ambient light.  
   - Connected to analog pin 36.

5. **NeoPixel LEDs**  
   - Controlled from GPIO 5.

6. **Buzzer**  
   - Controlled from GPIO 23.

7. **Wi-Fi**  
   - SSID: `IWN`  
   - Password: `c3z35gyy`

### Connections

| Component              | ESP32 Pin                    |
|------------------------|------------------------------|
| OLED Display (I2C)     | GPIO 21 (SDA), GPIO 22 (SCL) |
| Photoresistor          | GPIO 36                      |
| Soil Moisture Sensor   | GPIO 35                      |
| NeoPixel LEDs          | GPIO 5                       |
| Buzzer                 | GPIO 23                      |

                                               
## Installation and Usage

1. **Clone this repository:**
   ```bash
   git clone https://github.com/MarioLOI/Digital-Electronics-Project
